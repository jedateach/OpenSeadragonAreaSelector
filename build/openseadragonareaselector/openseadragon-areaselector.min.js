//! OpenSeadragonAreaSelector 0.1.0
//! Build date: 2015-04-03
//! https://github.com/jedateach/OpenSeadragonAreaSelector
!function(a){function b(){var a=document.createElement("div");return a.className="openseadragon-areaselector",a.style.borderWidth="2px",a.style.borderStyle="dashed",a.style.borderColor="red",a.style.cursor="move",a.style.position="relative",a}function c(a){a.handles=a.heandles||{};var b={n:{w:"100%",h:"10px",t:"-2px",l:"-2px",c:"ns"},e:{w:"10px",h:"100%",t:"-2px",r:"-2px",c:"ew"},s:{w:"100%",h:"10px",b:"-2px",l:"-2px",c:"ns"},w:{w:"10px",h:"100%",t:"-2px",l:"-2px",c:"ew"},se:{w:"10px",h:"10px",b:"-2px",r:"-2px",c:"nwse"},sw:{w:"10px",h:"10px",b:"-2px",l:"-2px",c:"nesw"},ne:{w:"10px",h:"10px",t:"-2px",r:"-2px",c:"nesw"},nw:{w:"10px",h:"10px",t:"-2px",l:"-2px",c:"nwse"}};for(var c in b){var d=document.createElement("div"),e=c+"-resize";d.className="openseadragon-areaselector-handle handle-"+e,d.style.position="absolute",d.style.width=b[c].w,d.style.height=b[c].h,void 0!==b[c].t&&(d.style.top=b[c].t),void 0!==b[c].b&&(d.style.bottom=b[c].b),void 0!==b[c].l&&(d.style.left=b[c].l),void 0!==b[c].r&&(d.style.right=b[c].r),d.style.cursor=b[c].c+"-resize",d.style.backgroundColor="white",d.style.border="1px solid grey",a.element.appendChild(d)}}a.AreaSelector=function(d){if(this.options=d||{},!d.viewer)throw new Error("A viewer must be specified.");this.viewer=d.viewer,this.element=b(),c(this),this.rect=new a.Rect(.5,.5,.1,.1),this.viewer.addOverlay(this.element,this.rect,a.OverlayPlacement.CENTER),this.mouseTracker=new a.MouseTracker({element:this.element,pressHandler:a.delegate(this,this.pressHandler),releaseHandler:a.delegate(this,this.releaseHandler),dragHandler:a.delegate(this,this.dragHandler)}),this.gridSize=.1},a.AreaSelector.prototype={pressHandler:function(a){this.dragging=!0,this.dragOrigin=a.position.clone(),this.rectOrigin=this.rect.getTopLeft()},dragHandler:function(b){var c=b.position.minus(this.dragOrigin);c=this.viewer.viewport.deltaPointsFromPixels(c),this.rect.x=this.rectOrigin.x+c.x,this.rect.y=this.rectOrigin.y+c.y,this.viewer.updateOverlay(this.element,this.rect,a.OverlayPlacement.CENTER)},releaseHandler:function(){this.dragging=!1},snapToGrid:function(){this.rect.x=Math.floor(10*this.rect.x)/10,this.rect.y=Math.floor(10*this.rect.y)/10}},a.Viewer.prototype.activateAreaSelector=function(b){return this.areaSelector||(b=b||{},b.viewer=this,this.areaSelector=new a.AreaSelector(b)),this.areaSelector}}(OpenSeadragon);